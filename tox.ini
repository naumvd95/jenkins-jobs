[tox]
minversion = 1.6
skipsdist = True
envlist = 9.{x,1,0},{8,7}.0

[testenv]
deps = -r{toxinidir}/conf/requirements.txt
setenv =
    COMMON={toxinidir}/servers/partner-ci/common.yaml
    OUTPUT={toxinidir}/output/{envname}
    CMD=jenkins-jobs -l ERROR --conf {toxinidir}/conf/jenkins_jobs_tox.ini test -p {toxinidir}/conf/jenkins_data.yaml {toxinidir}/servers/partner-ci
commands =
    7.0:               {env:CMD}/{envname}/contrail3.0.1.yaml:{env:COMMON}   -o {env:OUTPUT}
    8.0:               {env:CMD}/{envname}/contrail-4.0.1.yaml:{env:COMMON}  -o {env:OUTPUT}
    8.0:               {env:CMD}/{envname}/dvs-agentless.yaml:{env:COMMON}   -o {env:OUTPUT}
    9.0:               {env:CMD}/{envname}/gcs.yaml:{env:COMMON}             -o {env:OUTPUT}
    9.0:               {env:CMD}/{envname}/manila.yaml:{env:COMMON}          -o {env:OUTPUT}
    9.0:               {env:CMD}/{envname}/mistral.yaml:{env:COMMON}         -o {env:OUTPUT}
    9.{x,1,0},{8,7}.0: {env:CMD}/{envname}/contrail.yaml:{env:COMMON}        -o {env:OUTPUT}
    9.{x,1,0},{8,7}.0: {env:CMD}/{envname}/dvs.yaml:{env:COMMON}             -o {env:OUTPUT}
    9.{x,1,0},{8,7}.0: {env:CMD}/{envname}/nsxv.yaml:{env:COMMON}            -o {env:OUTPUT}
    9.{x,1,0},{8,7}.0: {env:CMD}/{envname}/vcenter.yaml:{env:COMMON}         -o {env:OUTPUT}
    9.{x,1,0}:         {env:CMD}/{envname}/nsxt.yaml:{env:COMMON}            -o {env:OUTPUT}

